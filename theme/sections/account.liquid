{%- liquid
  assign color_scheme = section.settings.color_scheme
  assign top_padding = section.settings.top_padding | times: 0.1 | round: 1
  assign bottom_padding = section.settings.bottom_padding | times: 0.1 | round: 1
  assign reduced_padding_top = top_padding | times: 0.55 | round: 2
  assign reduced_padding_bottom = bottom_padding | times: 0.55 | round: 2
-%}

{% style %}
  .responsive-padding-{{ section.id }} {
    padding-top: {{ reduced_padding_top }}rem;
    padding-bottom: {{ reduced_padding_bottom }}rem;
  }

  @media (min-width: 1024px) {
    .responsive-padding-{{ section.id }} {
      padding-top: {{ top_padding }}rem;
      padding-bottom: {{ bottom_padding }}rem;
    }
  }
{% endstyle %}

<div class="bg-{{ color_scheme }} text-{{ color_scheme }} flex max-w-content flex-col pt-16 pb-64 pr-32 pl-32 gap-24 xl:pr-0 xl:pl-0 sm:flex-row sm:pt-64 sm:pb-64 mx-auto justify-center sm:gap-32 items-start responsive-padding-{{ section.id }}">
  <a href="/account/" class="sm:hidden text-{{ color_scheme }} font-display text-title-large"
    >{{ 'customer.account.title' | t }}</a
  >

  <div class="flex flex-col items-start text-center w-250">
    <a
      href="/account"
      class="border-l px-8 py-4 font-display text-title-small {% if request.path == '/account' %}text-{{ color_scheme }} border-color{{ color_scheme }} {% else %}text-secondary-{{ section.settings.color_scheme }} border-[#E0E0E0]{% endif %}"
    >
      {{ 'customer.account.my_orders' | t }}
    </a>
    <a
      href="/account/addresses"
      class="border-l px-8 py-4 font-display text-title-small {% if request.path == '/account/addresses' %}text-{{ color_scheme }} {% else %}text-secondary-{{ section.settings.color_scheme }} border-[#E0E0E0]{% endif %}"
    >
      {{ 'customer.account.address_book' | t }}
    </a>

    <a
      href="{{ routes.account_logout_url }}"
      class="px-8 py-4 font-display text-title-small"
      >{{ 'customer.log_out' | t }}</a
    >
  </div>
  <div class="flex flex-col gap-32 w-full">
    <h2 class="font-display text-headline-medium">{{ 'customer.account.orders' | t }}</h2>
    <div>
      {% paginate customer.orders by 20 %}
        {%- if customer.orders.count > 0 -%}
          <div class="flex flex-col gap-16">
            {%- for order in customer.orders -%}
              <div class="flex justify-between">
                <div class="flex flex-col gap-12">
                  <div class="flex gap-4 text-body-medium font-display">
                    <a href="{{ order.customer_url }}">
                      {{ order.name }}
                    </a>
                    {{ order.fulfillment_status_label }}
                  </div>
                  <span class="font-display text-{{ color_scheme }} text-body-small">
                    {{ order.created_at | time_tag: format: 'date' }}
                  </span>

                  <ul class="flex gap-8">
                    {%- for item in order.line_items -%}
                      <li class="h-60 w-60">
                        <img src="{{ item.image | image_url }}" alt="{{ item.title }}">
                      </li>
                    {%- endfor -%}
                  </ul>
                  <p class="font-display text-{{ color_scheme }} text-body-small">
                    {%- if order.line_items.size == 1 -%}
                      {{ 'sections.cart.item_count.one' | t: count: order.line_items.size }}
                    {%- else -%}
                      {{ 'sections.cart.item_count.other' | t: count: order.line_items.size }}
                    {%- endif -%}
                  </p>
                </div>
                <span class="text-title-small text-{{ color_scheme }} font-display">
                  {{- order.total_net_amount | money_with_currency -}}
                </span>
              </div>
              {% unless forloop.last %}
                <div class="border-t border-[#E0E0E0] w-full"></div>
              {% endunless %}
            {%- endfor -%}
          </div>
        {%- else -%}
          <p class="text-body-small">{{ 'customer.account.no_orders_found' | t }}</p>
        {%- endif -%}
        {%- if paginate.pages > 1 -%}
          {%- if paginate.parts.size > 0 -%}
            <nav class="inline-flex -space-x-1 text-body-small" role="navigation" aria-label="{{ 'general.pagination.label' | t }}">
              <ul role="list" class="inline-flex">
                {%- if paginate.previous -%}
                  <li>
                    <a
                      href="{{ paginate.previous.url }}"
                      aria-label="{{ 'general.pagination.previous' | t }}"
                      class="flex items-center justify-center px-12 h-32 ms-0 leading-tight text-gray-500 bg-white border border-e-0 border-gray-300 rounded-s-lg hover:bg-gray-100 hover:text-gray-700"
                    >
                      {{ 'general.pagination.previous' | t }}
                    </a>
                  </li>
                {%- endif -%}

                {%- for part in paginate.parts -%}
                  <li>
                    {%- if part.is_link -%}
                      <a
                        href="{{ part.url }}"
                        aria-label="{{ part.title }}"
                        class="flex items-center justify-center px-12 h-32 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700"
                      >
                        {{- part.title -}}
                      </a>
                    {%- else -%}
                      {%- if part.title == paginate.current_page -%}
                        <span
                          aria-current="page"
                          aria-label="{{ part.title }}"
                          class="flex items-center justify-center px-12 h-32 text-blue-600 border border-gray-300 bg-blue-50 hover:bg-blue-100 hover:text-blue-700"
                        >
                          {{- part.title -}}
                        </span>
                      {%- else -%}
                        <span class="flex items-center justify-center px-12 h-32 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700">
                          {{- part.title -}}
                        </span>
                      {%- endif -%}
                    {%- endif -%}
                  </li>
                {%- endfor -%}

                {%- if paginate.next -%}
                  <li>
                    <a
                      href="{{ paginate.next.url }}"
                      aria-label="{{ 'general.pagination.next' | t }}"
                      class="flex items-center justify-center px-12 h-32 leading-tight text-gray-500 bg-white border border-gray-300 rounded-e-lg hover:bg-gray-100 hover:text-gray-700"
                    >
                      {{ 'general.pagination.next' | t }}
                    </a>
                  </li>
                {%- endif -%}
              </ul>
            </nav>
          {%- endif -%}
        {%- endif -%}
      {% endpaginate %}
    </div>
  </div>
</div>
{% schema %}
{
  "name": "Account",
  "tag": "section",
  "settings": [
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "Color scheme",
      "default": "scheme-1"
    },
    {
      "type": "range",
      "id": "top_padding",
      "label": "Top padding",
      "min": 0,
      "max": 96,
      "step": 1,
      "unit": "px",
      "default": 96
    },
    {
      "type": "range",
      "id": "bottom_padding",
      "label": "Bottom padding",
      "min": 0,
      "max": 96,
      "step": 1,
      "unit": "px",
      "default": 96
    }
  ]
}
{% endschema %}
