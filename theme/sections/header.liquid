{%- liquid
  assign color_scheme = section.settings.color_scheme
  assign sticky = section.settings.sticky
  assign logo_position = section.settings.logo_position

  if section.settings.border_b == true
    assign border_b = 'border-b border-color-' | append: color_scheme
  else
    assign border_b = 'border-none'
  endif

  if section.settings.text_uppercase == true
    assign text_uppercase = 'uppercase'
  else
    assign text_uppercase = 'normal-case'
  endif
-%}

{%- liquid
  assign reduced_padding_top = section.settings.top_padding | times: 0.55 | round: 0
  assign reduced_padding_bottom = section.settings.bottom_padding | times: 0.55 | round: 0
-%}

<style>
  .responsive-padding-{{ section.id }} {
    padding-top: {{ reduced_padding_top }}px;
    padding-bottom: {{ reduced_padding_bottom }}px;
  }

  @media (min-width: 1024px) {
    .responsive-padding-{{ section.id }} {
      padding-top: {{ section.settings.top_padding }}px;
      padding-bottom: {{ section.settings.bottom_padding }}px;
    }
  }
</style>

{%- if section.settings.sticky -%}
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      var headerSection = document.getElementById('shopify-section-{{ section.id }}');
      if (headerSection) {
        headerSection.classList.add('sticky', 'top-0', 'z-[9999]');
      }
    });
  </script>
{%- endif -%}

<div class="shopify-section {% if sticky %}sticky-header{% endif %}">
  <header class="relative z-[11] {{ border_b }} text-{{ color_scheme }} bg-{{color_scheme}}">
    <div
      class="sm:flex flex-col max-w-[1900px] mx-auto responsive-padding-{{ section.id }}"
      {% comment %} style="padding-top: {{ section.settings.top_padding }}px; padding-bottom: {{ section.settings.bottom_padding }}px;" {% endcomment %}
    >
      <div class="{%- if logo_position == 'top center' or logo_position == 'top left' -%}h-full min-[960px]:pb-[20px] {% else %}h-[81px]{% endif %} sm:px-[48px] sm:{%- if logo_position == 'top center' or logo_position == 'top left' -%}h-full{% else %}h-[97px]{% endif %} pl-[24px] pr-[24px] grid grid-cols-3">
        {%- if logo_position == 'left' -%}
          <button class="min-[960px]:hidden block min-w-min" onclick="toggleMobileTray()" aria-label="Open mobile menu">
            <svg
              class="w-6 h-6"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
            </svg>
          </button>
          {%- render 'header-logo' -%}
          <div class="hidden min-[960px]:flex justify-center items-center">
            {%- render 'header-desktop-nav', text_uppercase: text_uppercase -%}
          </div>
          {%- render 'header-desktop-icon-list', color_scheme: color_scheme.id -%}
        {%- elsif logo_position == 'center' -%}
          <button class="min-[960px]:hidden block min-w-min" onclick="toggleMobileTray()" aria-label="Open mobile menu">
            <svg
              class="w-6 h-6"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
            </svg>
          </button>
          <div class="hidden min-[960px]:flex justify-start items-center">
            {%- render 'header-desktop-nav', text_uppercase: text_uppercase -%}
          </div>
          <div class="flex justify-center items-center">
            {%- render 'header-logo' -%}
          </div>
          {%- render 'header-desktop-icon-list', color_scheme: color_scheme.id -%}
        {%- elsif logo_position == 'center left' -%}
          <button class="min-[960px]:hidden block min-w-min" onclick="toggleMobileTray()" aria-label="Open mobile menu">
            <svg
              class="w-6 h-6"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
            </svg>
          </button>
          <div class="flex gap-[50px] justify-center min-[960px]:justify-start">
            <div class="flex justify-center items-center">
              {%- render 'header-logo' -%}
            </div>
            <div class="hidden min-[960px]:flex justify-start items-center">
              {%- render 'header-desktop-nav', text_uppercase: text_uppercase -%}
            </div>
          </div>
          <div class="hidden min-[960px]:block"></div>
          {%- render 'header-desktop-icon-list', color_scheme: color_scheme.id -%}
        {%- elsif logo_position == 'top left' -%}
          <button class="min-[960px]:hidden block min-w-min" onclick="toggleMobileTray()" aria-label="Open mobile menu">
            <svg
              class="w-6 h-6"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
            </svg>
          </button>
          <div class="hidden min-[960px]:block order-1"></div>
          <div class="{%- if logo_position == 'top left' -%}items-start {% endif %} flex flex-col">
            <div class="flex justify-center items-center">
              {%- render 'header-logo' -%}
            </div>
            <div class="hidden min-[960px]:flex justify-center items-start">
              {%- render 'header-desktop-nav', text_uppercase: text_uppercase -%}
            </div>
          </div>
          <div class="flex items-center justify-end gap-[16px] order-2 ">
            {%- render 'header-desktop-icon-list', color_scheme: color_scheme.id -%}
          </div>
        {%- elsif logo_position == 'top center' -%}
          <button class="min-[960px]:hidden block min-w-min" onclick="toggleMobileTray()" aria-label="Open mobile menu">
            <svg
              class="w-6 h-6"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
            </svg>
          </button>
          <div class="hidden min-[960px]:block"></div>
          <div class="flex flex-col">
            <div class="flex justify-center items-center">
              {%- render 'header-logo' -%}
            </div>
            <div class="hidden min-[960px]:flex justify-center items-center">
              {%- render 'header-desktop-nav', text_uppercase: text_uppercase -%}
            </div>
          </div>
          {%- render 'header-desktop-icon-list',
            color_scheme: color_scheme.id,
            show_language_selector: section.settings.show_language_selector,
            show_currency_selector: section.settings.show_currency_selector
          -%}
        {%- else -%}
          <button class="min-[960px]:hidden block min-w-min" onclick="toggleMobileTray()" aria-label="Open mobile menu">
            <svg
              class="w-6 h-6"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
            </svg>
          </button>

          <div class="flex items-center justify-start max-[960px]:order-2 max-[960px]:justify-end">
            {%- render 'header-desktop-icon-list', color_scheme: color_scheme.id -%}
          </div>
          <div class="hidden min-[960px]:flex justify-center items-center">
            {%- render 'header-desktop-nav', text_uppercase: text_uppercase -%}
          </div>
          <div class="flex items-center justify-end max-[960px]:justify-center">
            {%- render 'header-logo' -%}
          </div>
        {%- endif -%}
      </div>
    </div>

    <div
      id="mobileTray"
      class="z-[101] top-[80px] w-full inset-0 bg-white text-black hidden"
    >
      <div
        id="trayContent"
        class="text-black flex flex-col gap-5 items-start sm:items-center pt-[32px] pl-[24px] pr-[24px] pb-[64px]"
      >
        {%- render 'mobile-main-menu', links: linklists[section.settings.selected_menu].links -%}
      </div>
      <div id="svg-assets" class="hidden">
        <div id="nav-right-arrow-icon">
          {{ 'nav-right-arrow-icon.svg' | inline_asset_content }}
        </div>
      </div>
    </div>
  </header>
</div>

{% render 'search-dialog' %}

{% schema %}
{
  "name": "t:sections.header.name",
  "settings": [
    {
      "type": "header",
      "content": "t:sections.header.settings.content"
    },
    {
      "type": "link_list",
      "id": "selected_menu",
      "label": "Select Menu",
      "default": "main-menu"
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "t:sections.all.colors.label",
      "default": "scheme-2"
    },
    {
      "type": "checkbox",
      "id": "sticky",
      "label": "t:sections.header.settings.sticky.label",
      "default": false
    },
    {
      "type": "checkbox",
      "id": "border_b",
      "default": false,
      "label": "t:sections.all.borders.border_b.label"
    },
    {
      "type": "checkbox",
      "id": "text_uppercase",
      "default": true,
      "label": "t:sections.all.uppercase.label"
    },
    {
      "type": "checkbox",
      "id": "show_language_selector",
      "label": "t:sections.footer.settings.show_language_selector.label",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_currency_selector",
      "label": "t:sections.footer.settings.show_currency_selector.label",
      "default": true
    },
    {
      "type": "header",
      "content": "t:sections.header.settings.desktop.content",
      "info": "t:sections.header.settings.desktop.info"
    },
    {
      "type": "range",
      "id": "top_padding",
      "label": "t:sections.all.top_padding.label",
      "info": "t:sections.all.top_padding.info",
      "min": 0,
      "max": 96,
      "step": 1,
      "unit": "px",
      "default": 0
    },
    {
      "type": "range",
      "id": "bottom_padding",
      "label": "t:sections.all.bottom_padding.label",
      "info": "t:sections.all.bottom_padding.info",
      "min": 0,
      "max": 96,
      "step": 1,
      "unit": "px",
      "default": 0
    },
    {
      "type": "select",
      "id": "logo_position",
      "label": "Logo Position",
      "options": [
        {
          "value": "top left",
          "label": "Top left"
        },
        {
          "value": "top center",
          "label": "Top center"
        },
        {
          "value": "center left",
          "label": "Center left"
        },
        {
          "value": "left",
          "label": "Left"
        },
        {
          "value": "center",
          "label": "Center"
        },
        {
          "value": "right",
          "label": "Right"
        }
      ],
      "default": "left"
    }
  ]
}
{% endschema %}
