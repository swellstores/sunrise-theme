{%- liquid
  assign color_scheme = section.settings.color_scheme
  assign logo_position = section.settings.logo_position

  if section.settings.border_b == true
    assign border_b = 'border-b border-color-' | append: color_scheme
  else
    assign border_b = 'border-none'
  endif

  if section.settings.text_uppercase == true
    assign text_uppercase = 'uppercase'
  else
    assign text_uppercase = 'normal-case'
  endif
-%}

{%- liquid
  assign reduced_padding_top = section.settings.top_padding | times: 0.55 | round: 0
  assign reduced_padding_bottom = section.settings.bottom_padding | times: 0.55 | round: 0
-%}

{% style %}
  .responsive-padding-{{ section.id }} {
    padding-top: {{ reduced_padding_top }}px;
    padding-bottom: {{ reduced_padding_bottom }}px;
  }

  @media (min-width: 1024px) {
    .responsive-padding-{{ section.id }} {
      padding-top: {{ section.settings.top_padding }}px;
      padding-bottom: {{ section.settings.bottom_padding }}px;
    }
  }

  {%- if section.settings.sticky -%}
    [id*="{{ section.id }}"] {
      position: sticky !important;
      top: 0;
      z-index: 4999;
    }
  {%- endif -%}
{% endstyle %}

<div class="swell-section">
  <header class="relative {{ border_b }} text-{{ color_scheme }} bg-{{color_scheme}}">
    <div class="w-full h-full">
      <div class="pl-[24px] pr-[24px] lg:pl-[160px] lg:pr-[160px]">
        <div class="max-w-container m-auto w-full h-full">
          <div class="{%- if logo_position == 'top center' or logo_position == 'top left' -%}h-full min-[960px]:pb-[20px] {% else %}h-[81px]{% endif %} {%- if logo_position == 'top center' or logo_position == 'top left' -%}h-full{% else %}h-[97px]{% endif %} flex flex-row items-center justify-between w-full {% if logo_position == 'left' or logo_position == 'center left' or logo_position == 'top left' %}min-[960px]:flex{% else %}sm:grid sm:grid-cols-3{% endif %} responsive-padding-{{ section.id }}">
            {%- if logo_position == 'left' or logo_position == blank -%}
              <div class="flex items-center">
                {% if section.settings.desktop_menu_type == 'drawer' %}
                  <div class="hidden min-[960px]:flex items-center pl-0 h-full">
                    <button
                      class="min-w-min flex items-center justify-center h-full"
                      data-drawer-menu-trigger
                      aria-label="Open menu"
                    >
                      <svg
                        class="w-6 h-6"
                        fill="none"
                        stroke="currentColor"
                        viewBox="0 0 24 24"
                        xmlns="http://www.w3.org/2000/svg"
                      >
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                      </svg>
                    </button>
                  </div>
                {% endif %}
                <button
                  class="min-[960px]:hidden block min-w-min"
                  data-mobile-trigger
                  aria-label="Open mobile menu"
                >
                  <svg
                    class="w-6 h-6"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                  </svg>
                </button>
                <div class="flex items-center pl-[24px] {% if section.settings.desktop_menu_type == 'drawer' %}pl-[32px]{% endif %} min-[1600px]:pl-[calc((100%-1600px)/2)]">
                  {%- render 'header-logo' -%}
                </div>
              </div>
              {% if section.settings.desktop_menu_type == 'mega' or section.settings.desktop_menu_type == 'dropdown' %}
                <div class="hidden min-[960px]:flex justify-center items-center flex-1">
                  {%- render 'header-desktop-nav',
                    text_uppercase: text_uppercase,
                    menu_color_scheme: section.settings.menu_color_scheme
                  -%}
                </div>
              {% endif %}
              <div class="flex items-center justify-end">
                {%- render 'header-desktop-icon-list', color_scheme: color_scheme -%}
              </div>
            {%- elsif logo_position == 'center' -%}
              {% if section.settings.desktop_menu_type == 'drawer' %}
                <div class="hidden min-[960px]:flex items-center">
                  <button
                    class="min-w-min"
                    data-drawer-menu-trigger
                    aria-label="Open menu"
                  >
                    <svg
                      class="w-6 h-6"
                      fill="none"
                      stroke="currentColor"
                      viewBox="0 0 24 24"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                    </svg>
                  </button>
                </div>
              {% else %}
                {% if section.settings.desktop_menu_type == 'mega' or section.settings.desktop_menu_type == 'dropdown' %}
                  <div class="hidden min-[960px]:flex justify-start items-center">
                    {%- render 'header-desktop-nav',
                      text_uppercase: text_uppercase,
                      menu_color_scheme: section.settings.menu_color_scheme
                    -%}
                  </div>
                {% endif %}
                <button class="min-[960px]:hidden block min-w-min" data-mobile-trigger aria-label="Open mobile menu">
                  <svg
                    class="w-6 h-6"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                  </svg>
                </button>
              {% endif %}
              <div class="flex justify-center items-center min-[1600px]:pl-[calc((100%-1600px)/2)]">
                {%- render 'header-logo' -%}
              </div>
              <div class="flex items-center justify-end gap-[16px]">
                {%- render 'header-desktop-icon-list', color_scheme: color_scheme -%}
              </div>
            {%- elsif logo_position == 'top left' -%}
              {% if section.settings.desktop_menu_type == 'drawer' %}
                <div class="hidden min-[960px]:flex items-center pl-0">
                  <button
                    class="min-w-min items-center justify-center h-full"
                    data-drawer-menu-trigger
                    aria-label="Open menu"
                  >
                    <svg
                      class="w-6 h-6"
                      fill="none"
                      stroke="currentColor"
                      viewBox="0 0 24 24"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                    </svg>
                  </button>
                </div>
              {% endif %}
              <button class="min-[960px]:hidden block min-w-min pl-0" data-mobile-trigger aria-label="Open mobile menu">
                <svg
                  class="w-6 h-6"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                </svg>
              </button>
              <div class="flex flex-col">
                <div class="flex justify-start items-center {% if section.settings.desktop_menu_type == 'drawer' %}pl-[32px]{% endif %}">
                  {%- render 'header-logo' -%}
                </div>
                {% if section.settings.desktop_menu_type == 'mega'
                  or section.settings.desktop_menu_type == 'dropdown'
                %}
                  <div class="hidden min-[960px]:flex justify-start items-start">
                    {%- render 'header-desktop-nav',
                      text_uppercase: text_uppercase,
                      color_scheme: color_scheme,
                      menu_color_scheme: section.settings.menu_color_scheme
                    -%}
                  </div>
                {% endif %}
              </div>
              <div class="flex items-center justify-end gap-[16px]">
                {%- render 'header-desktop-icon-list', color_scheme: color_scheme -%}
              </div>
            {%- elsif logo_position == 'center left' -%}
              {% if section.settings.desktop_menu_type == 'drawer' %}
                <div class="hidden min-[960px]:flex items-center pl-0 h-full">
                  <button
                    class="min-w-min items-center justify-center h-full"
                    data-drawer-menu-trigger
                    aria-label="Open menu"
                  >
                    <svg
                      class="w-6 h-6"
                      fill="none"
                      stroke="currentColor"
                      viewBox="0 0 24 24"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                    </svg>
                  </button>
                </div>
              {% endif %}
              <button class="min-[960px]:hidden block min-w-min pl-0" data-mobile-trigger aria-label="Open mobile menu">
                <svg
                  class="w-6 h-6"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                </svg>
              </button>
              <div class="flex justify-start items-center {% if section.settings.desktop_menu_type == 'drawer' %}pl-[32px]{% endif %} min-[1600px]:pl-[calc((100%-1600px)/2)]">
                {%- render 'header-logo' -%}
              </div>
              {% if section.settings.desktop_menu_type == 'mega' or section.settings.desktop_menu_type == 'dropdown' %}
                <div class="hidden min-[960px]:flex justify-start items-center pl-[32px]">
                  {%- render 'header-desktop-nav',
                    text_uppercase: text_uppercase,
                    color_scheme: color_scheme,
                    menu_color_scheme: section.settings.menu_color_scheme
                  -%}
                </div>
              {% endif %}
              <div class="flex items-center justify-end gap-[16px]">
                {%- render 'header-desktop-icon-list', color_scheme: color_scheme -%}
              </div>
            {%- elsif logo_position == 'top center' -%}
              {% if section.settings.desktop_menu_type == 'drawer' %}
                <div class="hidden min-[960px]:flex items-center">
                  <button
                    class="min-w-min block"
                    data-drawer-menu-trigger
                    aria-label="Open menu"
                  >
                    <svg
                      class="w-6 h-6"
                      fill="none"
                      stroke="currentColor"
                      xmlns="http://www.w3.org/2000/svg"
                      viewBox="0 0 24 24"
                    >
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                    </svg>
                  </button>
                </div>
              {% else %}
                <button class="min-[960px]:hidden block min-w-min" data-mobile-trigger aria-label="Open mobile menu">
                  <svg
                    class="w-6 h-6"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                  </svg>
                </button>
              {% endif %}
              {% if section.settings.desktop_menu_type == 'mega' or section.settings.desktop_menu_type == 'dropdown' %}
                <div class="hidden min-[960px]:block"></div>
              {% endif %}
              <div class="flex flex-col">
                <div class="flex justify-center items-center min-[1600px]:pl-[calc((100%-1600px)/2)]">
                  {%- render 'header-logo' -%}
                </div>
                {% if section.settings.desktop_menu_type == 'mega'
                  or section.settings.desktop_menu_type == 'dropdown'
                %}
                  <div class="hidden min-[960px]:flex justify-center items-center">
                    {%- render 'header-desktop-nav',
                      text_uppercase: text_uppercase,
                      color_scheme: color_scheme,
                      menu_color_scheme: section.settings.menu_color_scheme
                    -%}
                  </div>
                {% endif %}
              </div>
              {%- render 'header-desktop-icon-list',
                color_scheme: color_scheme,
                show_language_selector: section.settings.show_language_selector,
                show_currency_selector: section.settings.show_currency_selector
              -%}
            {%- endif -%}
          </div>
        </div>
      </div>
    </div>

    <div
      id="mobileTray"
      class="z-[101] top-[80px] w-full inset-0 bg-white hidden"
    >
      <div
        id="trayContent"
        class="flex flex-col gap-5 items-start sm:items-center pt-[32px] pl-[24px] pr-[24px] pb-[64px]"
      >
        {%- render 'mobile-main-menu', links: linklists[section.settings.menu].links, color_scheme: color_scheme -%}
      </div>
      <div id="svg-assets" class="hidden">
        <div id="nav-right-arrow-icon">
          {{ 'nav-right-arrow-icon.svg' | inline_asset_content }}
        </div>
      </div>
    </div>
  </header>

  {% if section.settings.desktop_menu_type == 'drawer' %}
    {% render 'drawer-menu' %}
  {% endif %}
</div>

{% render 'search-dialog' %}

{% schema %}
{
  "name": "Header",
  "settings": [
    {
      "type": "header",
      "content": "Header"
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "Color scheme",
      "default": "scheme-1"
    },
    {
      "type": "link_list",
      "id": "menu",
      "label": "Menu"
    },
    {
      "type": "select",
      "id": "desktop_menu_type",
      "label": "Desktop menu type",
      "options": [
        { "value": "dropdown", "label": "Dropdown" },
        { "value": "mega", "label": "Mega menu" },
        { "value": "drawer", "label": "Drawer menu" }
      ],
      "default": "dropdown"
    },
    {
      "type": "color_scheme",
      "id": "menu_color_scheme",
      "label": "Menu color scheme",
      "default": "scheme-1"
    },
    {
      "type": "range",
      "id": "mega_menu_row_count",
      "label": "Mega menu row count",
      "min": 3,
      "max": 5,
      "step": 1,
      "default": 4
    },
    {
      "type": "select",
      "id": "mega_menu_alignment",
      "label": "Mega menu alignment",
      "options": [
        { "value": "left", "label": "Left" },
        { "value": "center", "label": "Center" }
      ],
      "default": "center"
    },
    {
      "type": "checkbox",
      "id": "sticky",
      "label": "Sticky header",
      "default": false
    },
    {
      "type": "checkbox",
      "id": "border_b",
      "default": false,
      "label": "Bottom border"
    },
    {
      "type": "checkbox",
      "id": "text_uppercase",
      "default": true,
      "label": "Uppercase text"
    },
    {
      "type": "checkbox",
      "id": "show_language_selector",
      "label": "Show language selector",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_currency_selector",
      "label": "Show currency selector",
      "default": true
    },
    {
      "type": "header",
      "content": "Desktop",
      "info": "640px and wider, for more refer to Tailwind's responsive design [docs](https://tailwindcss.com/docs/responsive-design)"
    },
    {
      "type": "range",
      "id": "top_padding",
      "label": "Top padding",
      "min": 0,
      "max": 96,
      "step": 1,
      "unit": "px",
      "default": 0
    },
    {
      "type": "range",
      "id": "bottom_padding",
      "label": "Bottom padding",
      "min": 0,
      "max": 96,
      "step": 1,
      "unit": "px",
      "default": 0
    },
    {
      "type": "select",
      "id": "logo_position",
      "label": "Logo position",
      "options": [
        { "value": "top left", "label": "Top left" },
        { "value": "top center", "label": "Top center" },
        { "value": "center left", "label": "Center left" },
        { "value": "left", "label": "Left" },
        { "value": "center", "label": "Center" }
      ],
      "default": "left"
    }
  ]
}
{% endschema %}
