new class{constructor(){this.mobileTray=document.getElementById("mobileTray"),this.mainMenu=document.getElementById("mainMenu"),this.submenuTray=document.getElementById("submenuTray"),this.trayTitle=document.getElementById("trayTitle"),this.sublinkTrayContent=document.getElementById("sublinkTrayContent"),this.init()}init(){const t=document.querySelector("button[data-mobile-trigger]");t&&t.addEventListener("click",(()=>this.toggleMobileTray())),window.openSubMenu=(t,e)=>this.openSubMenu(t,e),window.closeSubLinkTray=()=>this.closeSubLinkTray()}toggleMobileTray(){if(this.mobileTray){this.mobileTray.classList.toggle("hidden");const t=!this.mobileTray.classList.contains("hidden"),e=document.querySelector('button[onclick="toggleMobileTray()"]');e&&(e.innerHTML=t?'\n            \x3c!-- Cross Icon --\x3e\n            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>\n            </svg>\n          ':'\n            \x3c!-- Hamburger Icon --\x3e\n            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>\n            </svg>\n          ')}}openSubMenu(t,e){const n=document.querySelector(`#${t}`);n?(this.sublinkTrayContent.innerHTML="",this.renderSublinks(n,this.sublinkTrayContent),this.trayTitle.textContent=e,this.mainMenu.classList.add("hidden"),this.submenuTray.classList.remove("hidden")):console.error(`No sublinks found for submenuId: ${t}`)}closeSubLinkTray(){this.mainMenu.classList.remove("hidden"),this.submenuTray.classList.add("hidden")}renderSublinks(t,e){t.querySelectorAll(":scope > li").forEach((t=>{const n=t.querySelector("a")||t.querySelector("button"),i=t.querySelector(":scope > ul"),s=document.createElement("li");if(s.classList.add("h-[48px]","flex","items-center","justify-between","cursor-pointer"),n){const t=document.createElement("div");t.classList.add("flex","items-center","justify-between","w-full");const e=document.createElement("button");if(e.textContent=n.textContent.trim()||"Unnamed",e.classList.add("submenu-button","flex-grow","text-left"),i){const t=i.id;s.setAttribute("data-submenu-id",t),s.addEventListener("click",(()=>this.openSubMenu(t,n.textContent.trim()||"Unnamed Submenu")))}else"a"===n.tagName.toLowerCase()&&s.addEventListener("click",(()=>{window.location.href=n.href}));if(t.appendChild(e),"BUTTON"===n.tagName){const e=document.createElement("span");e.classList.add("flex-shrink-0","ml-2"),e.innerHTML='\n            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n              <path d="M12 20L20 12L12 4" stroke="currentColor" stroke-width="2"></path>\n              <path d="M3 11H19V13H3V11Z" fill="currentColor"></path>\n            </svg>',t.appendChild(e)}s.appendChild(t)}else console.warn("No link or button found for item:",t);e.appendChild(s)}))}};var t=new class{listeners=new Map;on(t,e){let n=this.listeners.get(t);return n||(n=new Set,this.listeners.set(t,n)),n.add(e),()=>{n.delete(e)}}off(t,e){let n=this.listeners.get(t);n&&n.delete(e)}emit(t,e){const n=this.listeners.get(t);if(n)for(const t of n)t(e)}};const e="/cart/add",n="/cart/update",i="/cart",s="/cart/clear",r={async addToCart(t,n,i,s,r=1,o="standard",a=""){const c={product_id:t,quantity:r};if(n&&(c.id=n),i&&s)try{const t=JSON.parse(decodeURIComponent(s)),e=i.split(","),n=[];for(const i of t)for(const t of i.values)e.includes(t.id)&&n.push({id:i.id,name:i.name,value:t.name,value_id:t.id,variant:i.variant_option});n.length>0&&n.length===e.length&&(c.options=n)}catch{}"subscription"===o&&(c.purchase_option={type:"subscription",plan:a});try{const t=await fetch(e,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify(c)});if(!t.ok)throw new Error("Network response was not ok");const n=await t.json();return console.log("Product added to cart:",n),n}catch(t){throw console.error("Error adding product to cart:",t),t}},async getCart(){try{const t=await fetch(i,{method:"GET",headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}});if(!t.ok)throw new Error("Network response was not ok");const e=await t.json();return console.log("Cart:",e),e}catch(t){throw console.error("Error getting cart:",t),t}},async clearCart(){try{const t=await fetch(s,{method:"POST",headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}});if(!t.ok)throw new Error("Network response was not ok");const e=await t.json();return console.log("Cart cleared:",e),e}catch(t){}},async updateCart(e){t.emit("cart-update-before",e);try{const i=await fetch(n,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify(e)});if(!i.ok)throw new Error("Network response was not ok");t.emit("cart-update-after",e);const s=await i.json();return console.log("Cart updated:",s),s}catch(t){throw console.error("Error updating cart:",t),t}}};function o(t){let e=t.trim();if(e.startsWith("<!")){const t=e.indexOf(">");-1!==t&&(e=e.slice(t+1)),e=function(t){const e=document.createElement("textarea");return e.innerHTML=t,e.value}(e)}return JSON.parse(e)}class a extends HTMLElement{constructor(){super(),this.subscriptions=[],this.handleUpdateCartBound=this.handleUpdateCart.bind(this)}connectedCallback(){document.addEventListener("quantity-change",this.handleUpdateCartBound),this.subscriptions.push(t.on("cart-update-before",this.beforeUpdateCart.bind(this)),t.on("cart-update-after",this.afterUpdateCart.bind(this)))}disconnectedCallback(){document.removeEventListener("quantity-change",this.handleUpdateCartBound),this.subscriptions.forEach((t=>t())),this.subscriptions.length=0}async fetchCartContent(){const t=await fetch("/?sections=cart");if(!t.ok)throw new Error("Failed to fetch cart");const e=o(await t.text());return(new DOMParser).parseFromString(e.cart,"text/html")}async handleUpdateCart(t){const{line:e,quantity:n}=t.detail;try{await r.updateCart({line:e,quantity:n})}catch(t){console.error("Error handling update cart:",t)}}beforeUpdateCart({line:t,quantity:e}){if(0===e){const e=this.querySelector(`tr[data-line="${t}"]`);null!==e&&e.classList.add("opacity-20")}}afterUpdateCart(){this.fetchCartContent().then((t=>{this.updateCartContent(t)}))}async updateCartContent(t){const e=t.querySelector("cart-root");if(!e)throw new Error("No cart content found to update");this.innerHTML=e.innerHTML}}const c={activeComponent:null,open(t){this.activeComponent&&this.activeComponent!==t&&this.activeComponent.close(),this.activeComponent=t,t.open()},close(t){this.activeComponent===t&&(t.close(),this.activeComponent=null)}};class l extends HTMLElement{constructor(){super(),this.target=null,this.body=null,this.trigger=null,this.drawerTriggers=[],this.backdropOverlay=null,this.announcement=null,this.header=null,this.searchDialog=null,this.cartDrawerButton=null,this.cartCount=null,this.subscriptions=[],this.openUiManagerBound=u.bind(this),this.closeUiManagerBound=d.bind(this),this.handleAddToCartBound=this.handleAddToCart.bind(this),this.handleUpdateCartBound=this.handleUpdateCart.bind(this),this.onDocumentKeyDownBound=this.onDocumentKeyDown.bind(this),this.onClickBackgroundOverlayBound=this.onClickBackgroundOverlay.bind(this)}connectedCallback(){this.target=this,this.body=document.body,this.trigger=document.querySelector("cart-trigger"),this.root=document.querySelector("cart-drawer-root"),this.backdropOverlay=document.querySelector("backdrop-root"),this.announcement=document.querySelector("announcement-root"),this.header=document.querySelector("header"),this.searchDialog=document.querySelector("search-dialog-root"),this.cartDrawerButton=document.querySelector("cart-drawer-button"),this.cartCount=document.querySelector("cart-count"),this.trigger&&this.trigger.addEventListener("click",this.openUiManagerBound),this.connectDrawerTriggers(),this.cartDrawerButton&&this.cartDrawerButton.addEventListener("click",this.handleAddToCartBound),document.addEventListener("keydown",this.onDocumentKeyDownBound),this.backdropOverlay&&this.backdropOverlay.addEventListener("click",this.onClickBackgroundOverlayBound),this.addEventListener("quantity-change",this.handleUpdateCartBound),this.subscriptions.push(t.on("cart-update-before",this.beforeUpdateCart.bind(this)),t.on("cart-update-after",this.afterUpdateCart.bind(this)),t.on("product-quantity-change",this.handleUpdateProductQuantity.bind(this)),t.on("product-options-change",this.handleUpdateProductOptions.bind(this)),t.on("product-purchase-option-change",this.handleUpdateProductPurchaseOption.bind(this)))}disconnectedCallback(){this.trigger&&this.trigger.removeEventListener("click",this.openUiManagerBound),this.disconnectDrawerTriggers(),this.cartDrawerButton&&this.cartDrawerButton.removeEventListener("click",this.handleAddToCartBound),document.removeEventListener("keydown",this.onDocumentKeyDownBound),this.backdropOverlay&&this.backdropOverlay.removeEventListener("click",this.onClickBackgroundOverlayBound),this.removeEventListener("quantity-change",this.handleUpdateCartBound),this.subscriptions.forEach((t=>t())),this.subscriptions.length=0,this.body=null,this.trigger=null,this.target=null,this.drawerTriggers=[],this.backdropOverlay=null,this.announcement=null,this.header=null,this.searchDialog=null,this.cartDrawerButton=null,this.cartCount=null}connectDrawerTriggers(){this.drawerTriggers=document.querySelectorAll("cart-drawer-trigger"),this.drawerTriggers.forEach((t=>{t.addEventListener("click",this.closeUiManagerBound)}))}disconnectDrawerTriggers(){this.drawerTriggers.forEach((t=>{t.removeEventListener("click",this.closeUiManagerBound)}))}onDocumentKeyDown(t){"Escape"===t.key&&this.target&&"false"===this.target.getAttribute("aria-hidden")&&c.close(this)}onClickBackgroundOverlay(t){this.target&&"false"===this.target.getAttribute("aria-hidden")&&!this.target.contains(t.target)&&c.close(this)}async fetchCartDrawerContent(){const t=await fetch("/?sections=cart-drawer");if(!t.ok)throw new Error("Failed to fetch cart-drawer");const e=o(await t.text());return(new DOMParser).parseFromString(e["cart-drawer"],"text/html")}toggleLoader(t){const e=this.cartDrawerButton.querySelector("span"),n=this.cartDrawerButton.querySelector('div[role="status"]');e&&e.classList.toggle("hidden",t),n&&(n.classList.toggle("hidden",!t),n.classList.toggle("flex",t))}async handleAddToCart(t){t.preventDefault();const e=this.cartDrawerButton.getAttribute("data-product-id"),n=this.cartDrawerButton.getAttribute("data-option-values"),i=this.cartDrawerButton.getAttribute("data-product-options"),s=this.cartDrawerButton.getAttribute("data-purchase-option-type"),o=this.cartDrawerButton.getAttribute("data-purchase-option-plan"),a=Number(this.cartDrawerButton.getAttribute("data-variant-quantity"));this.toggleLoader(!0);try{await r.addToCart(e,"",n,i,a,s,o),await this.fetchCartDrawerContent().then((t=>this.updateCartDrawerContent(t))),c.open(this)}catch(t){console.error("Error handling add to cart:",t)}finally{this.toggleLoader(!1)}}async handleUpdateCart(t){t.stopPropagation();const{line:e,quantity:n}=t.detail,i=this.root.querySelector("cart-drawer-subtotal"),s=i.querySelector("div[role='status']");try{i&&i.classList.add("hidden"),s&&(s.classList.remove("hidden"),s.classList.add("flex")),await r.updateCart({line:e,quantity:n})}catch(t){console.error("Error updating cart:",t)}finally{i&&i.classList.remove("hidden"),s&&(s.classList.add("hidden"),s.classList.remove("flex"))}}beforeUpdateCart({line:t,quantity:e}){if(0===e){const e=this.querySelector(`cart-drawer-item[data-line="${t}"]`);null!==e&&e.classList.add("opacity-20")}}afterUpdateCart(){this.fetchCartDrawerContent().then((t=>this.updateCartDrawerContent(t)))}async updateCartDrawerContent(t){const e=t.querySelector("cart-drawer-root"),n=e?.dataset.itemCount;if(void 0===n)throw new Error("Unable to update cart drawer content");this.cartCount.textContent=n,this.root.innerHTML=e.innerHTML,this.disconnectDrawerTriggers(),this.connectDrawerTriggers()}open(){this.header&&this.backdropOverlay&&this.target&&this.searchDialog&&(this.body.classList.add("overflow-hidden"),this.header.classList.remove("z-60"),this.header.classList.add("z-10"),this.announcement&&(this.announcement.classList.remove("z-60"),this.announcement.classList.add("z-10")),this.searchDialog.classList.remove("z-50"),this.backdropOverlay.classList.remove("translate-x-full"),this.target.classList.remove("translate-x-full"),this.target.setAttribute("aria-hidden","false"))}close(){this.header&&this.backdropOverlay&&this.target&&(this.body.classList.remove("overflow-hidden"),this.header.classList.add("z-60"),this.header.classList.remove("z-10"),this.announcement&&(this.announcement.classList.add("z-60"),this.announcement.classList.remove("z-10")),this.searchDialog.classList.add("z-50"),this.backdropOverlay.classList.add("translate-x-full"),this.target.classList.add("translate-x-full"),this.target.setAttribute("aria-hidden","true"))}handleUpdateProductQuantity(t){const{quantity:e}=t;this.cartDrawerButton.setAttribute("data-variant-quantity",e)}handleUpdateProductPurchaseOption(t){const{type:e,planId:n}=t;this.cartDrawerButton.setAttribute("data-purchase-option-type",e),this.cartDrawerButton.setAttribute("data-purchase-option-plan",n)}handleUpdateProductOptions(t){const{optionValues:e}=t;this.cartDrawerButton.setAttribute("data-option-values",e)}}function u(){c.open(this)}function d(){c.close(this)}const h=Math.min,p=Math.max,m=Math.round,g=Math.floor,f=t=>({x:t,y:t}),y={left:"right",right:"left",bottom:"top",top:"bottom"},v={start:"end",end:"start"};function b(t,e,n){return p(t,h(e,n))}function w(t,e){return"function"==typeof t?t(e):t}function L(t){return t.split("-")[0]}function k(t){return t.split("-")[1]}function E(t){return"x"===t?"y":"x"}function C(t){return"y"===t?"height":"width"}function S(t){return["top","bottom"].includes(L(t))?"y":"x"}function x(t){return E(S(t))}function q(t,e,n){void 0===n&&(n=!1);const i=k(t),s=x(t),r=C(s);let o="x"===s?i===(n?"end":"start")?"right":"left":"start"===i?"bottom":"top";return e.reference[r]>e.floating[r]&&(o=B(o)),[o,B(o)]}function T(t){return t.replace(/start|end/g,(t=>v[t]))}function B(t){return t.replace(/left|right|bottom|top/g,(t=>y[t]))}function M(t){return"number"!=typeof t?function(t){return{top:0,right:0,bottom:0,left:0,...t}}(t):{top:t,right:t,bottom:t,left:t}}function I(t){const{x:e,y:n,width:i,height:s}=t;return{width:i,height:s,top:n,left:e,right:e+i,bottom:n+s,x:e,y:n}}function D(t,e,n){let{reference:i,floating:s}=t;const r=S(e),o=x(e),a=C(o),c=L(e),l="y"===r,u=i.x+i.width/2-s.width/2,d=i.y+i.height/2-s.height/2,h=i[a]/2-s[a]/2;let p;switch(c){case"top":p={x:u,y:i.y-s.height};break;case"bottom":p={x:u,y:i.y+i.height};break;case"right":p={x:i.x+i.width,y:d};break;case"left":p={x:i.x-s.width,y:d};break;default:p={x:i.x,y:i.y}}switch(k(e)){case"start":p[o]-=h*(n&&l?-1:1);break;case"end":p[o]+=h*(n&&l?-1:1)}return p}async function A(t,e){var n;void 0===e&&(e={});const{x:i,y:s,platform:r,rects:o,elements:a,strategy:c}=t,{boundary:l="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:h=!1,padding:p=0}=w(e,t),m=M(p),g=a[h?"floating"===d?"reference":"floating":d],f=I(await r.getClippingRect({element:null==(n=await(null==r.isElement?void 0:r.isElement(g)))||n?g:g.contextElement||await(null==r.getDocumentElement?void 0:r.getDocumentElement(a.floating)),boundary:l,rootBoundary:u,strategy:c})),y="floating"===d?{x:i,y:s,width:o.floating.width,height:o.floating.height}:o.reference,v=await(null==r.getOffsetParent?void 0:r.getOffsetParent(a.floating)),b=await(null==r.isElement?void 0:r.isElement(v))&&await(null==r.getScale?void 0:r.getScale(v))||{x:1,y:1},L=I(r.convertOffsetParentRelativeRectToViewportRelativeRect?await r.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:y,offsetParent:v,strategy:c}):y);return{top:(f.top-L.top+m.top)/b.y,bottom:(L.bottom-f.bottom+m.bottom)/b.y,left:(f.left-L.left+m.left)/b.x,right:(L.right-f.right+m.right)/b.x}}function O(){return"undefined"!=typeof window}function P(t){return U(t)?(t.nodeName||"").toLowerCase():"#document"}function H(t){var e;return(null==t||null==(e=t.ownerDocument)?void 0:e.defaultView)||window}function R(t){var e;return null==(e=(U(t)?t.ownerDocument:t.document)||window.document)?void 0:e.documentElement}function U(t){return!!O()&&(t instanceof Node||t instanceof H(t).Node)}function F(t){return!!O()&&(t instanceof Element||t instanceof H(t).Element)}function z(t){return!!O()&&(t instanceof HTMLElement||t instanceof H(t).HTMLElement)}function N(t){return!(!O()||"undefined"==typeof ShadowRoot)&&(t instanceof ShadowRoot||t instanceof H(t).ShadowRoot)}function V(t){const{overflow:e,overflowX:n,overflowY:i,display:s}=K(t);return/auto|scroll|overlay|hidden|clip/.test(e+i+n)&&!["inline","contents"].includes(s)}function j(t){return["table","td","th"].includes(P(t))}function _(t){return[":popover-open",":modal"].some((e=>{try{return t.matches(e)}catch(t){return!1}}))}function W(t){const e=$(),n=F(t)?K(t):t;return"none"!==n.transform||"none"!==n.perspective||!!n.containerType&&"normal"!==n.containerType||!e&&!!n.backdropFilter&&"none"!==n.backdropFilter||!e&&!!n.filter&&"none"!==n.filter||["transform","perspective","filter"].some((t=>(n.willChange||"").includes(t)))||["paint","layout","strict","content"].some((t=>(n.contain||"").includes(t)))}function $(){return!("undefined"==typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function X(t){return["html","body","#document"].includes(P(t))}function K(t){return H(t).getComputedStyle(t)}function J(t){return F(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Q(t){if("html"===P(t))return t;const e=t.assignedSlot||t.parentNode||N(t)&&t.host||R(t);return N(e)?e.host:e}function Y(t){const e=Q(t);return X(e)?t.ownerDocument?t.ownerDocument.body:t.body:z(e)&&V(e)?e:Y(e)}function G(t,e,n){var i;void 0===e&&(e=[]),void 0===n&&(n=!0);const s=Y(t),r=s===(null==(i=t.ownerDocument)?void 0:i.body),o=H(s);if(r){const t=Z(o);return e.concat(o,o.visualViewport||[],V(s)?s:[],t&&n?G(t):[])}return e.concat(s,G(s,[],n))}function Z(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function tt(t){const e=K(t);let n=parseFloat(e.width)||0,i=parseFloat(e.height)||0;const s=z(t),r=s?t.offsetWidth:n,o=s?t.offsetHeight:i,a=m(n)!==r||m(i)!==o;return a&&(n=r,i=o),{width:n,height:i,$:a}}function et(t){return F(t)?t:t.contextElement}function nt(t){const e=et(t);if(!z(e))return f(1);const n=e.getBoundingClientRect(),{width:i,height:s,$:r}=tt(e);let o=(r?m(n.width):n.width)/i,a=(r?m(n.height):n.height)/s;return o&&Number.isFinite(o)||(o=1),a&&Number.isFinite(a)||(a=1),{x:o,y:a}}const it=f(0);function st(t){const e=H(t);return $()&&e.visualViewport?{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}:it}function rt(t,e,n,i){void 0===e&&(e=!1),void 0===n&&(n=!1);const s=t.getBoundingClientRect(),r=et(t);let o=f(1);e&&(i?F(i)&&(o=nt(i)):o=nt(t));const a=function(t,e,n){return void 0===e&&(e=!1),!(!n||e&&n!==H(t))&&e}(r,n,i)?st(r):f(0);let c=(s.left+a.x)/o.x,l=(s.top+a.y)/o.y,u=s.width/o.x,d=s.height/o.y;if(r){const t=H(r),e=i&&F(i)?H(i):i;let n=t,s=Z(n);for(;s&&i&&e!==n;){const t=nt(s),e=s.getBoundingClientRect(),i=K(s),r=e.left+(s.clientLeft+parseFloat(i.paddingLeft))*t.x,o=e.top+(s.clientTop+parseFloat(i.paddingTop))*t.y;c*=t.x,l*=t.y,u*=t.x,d*=t.y,c+=r,l+=o,n=H(s),s=Z(n)}}return I({width:u,height:d,x:c,y:l})}function ot(t,e){const n=J(t).scrollLeft;return e?e.left+n:rt(R(t)).left+n}function at(t,e,n){let i;if("viewport"===e)i=function(t,e){const n=H(t),i=R(t),s=n.visualViewport;let r=i.clientWidth,o=i.clientHeight,a=0,c=0;if(s){r=s.width,o=s.height;const t=$();(!t||t&&"fixed"===e)&&(a=s.offsetLeft,c=s.offsetTop)}return{width:r,height:o,x:a,y:c}}(t,n);else if("document"===e)i=function(t){const e=R(t),n=J(t),i=t.ownerDocument.body,s=p(e.scrollWidth,e.clientWidth,i.scrollWidth,i.clientWidth),r=p(e.scrollHeight,e.clientHeight,i.scrollHeight,i.clientHeight);let o=-n.scrollLeft+ot(t);const a=-n.scrollTop;return"rtl"===K(i).direction&&(o+=p(e.clientWidth,i.clientWidth)-s),{width:s,height:r,x:o,y:a}}(R(t));else if(F(e))i=function(t,e){const n=rt(t,!0,"fixed"===e),i=n.top+t.clientTop,s=n.left+t.clientLeft,r=z(t)?nt(t):f(1);return{width:t.clientWidth*r.x,height:t.clientHeight*r.y,x:s*r.x,y:i*r.y}}(e,n);else{const n=st(t);i={...e,x:e.x-n.x,y:e.y-n.y}}return I(i)}function ct(t,e){const n=Q(t);return!(n===e||!F(n)||X(n))&&("fixed"===K(n).position||ct(n,e))}function lt(t,e,n){const i=z(e),s=R(e),r="fixed"===n,o=rt(t,!0,r,e);let a={scrollLeft:0,scrollTop:0};const c=f(0);if(i||!i&&!r)if(("body"!==P(e)||V(s))&&(a=J(e)),i){const t=rt(e,!0,r,e);c.x=t.x+e.clientLeft,c.y=t.y+e.clientTop}else s&&(c.x=ot(s));let l=0,u=0;if(s&&!i&&!r){const t=s.getBoundingClientRect();u=t.top+a.scrollTop,l=t.left+a.scrollLeft-ot(s,t)}return{x:o.left+a.scrollLeft-c.x-l,y:o.top+a.scrollTop-c.y-u,width:o.width,height:o.height}}function ut(t){return"static"===K(t).position}function dt(t,e){if(!z(t)||"fixed"===K(t).position)return null;if(e)return e(t);let n=t.offsetParent;return R(t)===n&&(n=n.ownerDocument.body),n}function ht(t,e){const n=H(t);if(_(t))return n;if(!z(t)){let e=Q(t);for(;e&&!X(e);){if(F(e)&&!ut(e))return e;e=Q(e)}return n}let i=dt(t,e);for(;i&&j(i)&&ut(i);)i=dt(i,e);return i&&X(i)&&ut(i)&&!W(i)?n:i||function(t){let e=Q(t);for(;z(e)&&!X(e);){if(W(e))return e;if(_(e))return null;e=Q(e)}return null}(t)||n}const pt={convertOffsetParentRelativeRectToViewportRelativeRect:function(t){let{elements:e,rect:n,offsetParent:i,strategy:s}=t;const r="fixed"===s,o=R(i),a=!!e&&_(e.floating);if(i===o||a&&r)return n;let c={scrollLeft:0,scrollTop:0},l=f(1);const u=f(0),d=z(i);if((d||!d&&!r)&&(("body"!==P(i)||V(o))&&(c=J(i)),z(i))){const t=rt(i);l=nt(i),u.x=t.x+i.clientLeft,u.y=t.y+i.clientTop}return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-c.scrollLeft*l.x+u.x,y:n.y*l.y-c.scrollTop*l.y+u.y}},getDocumentElement:R,getClippingRect:function(t){let{element:e,boundary:n,rootBoundary:i,strategy:s}=t;const r=[..."clippingAncestors"===n?_(e)?[]:function(t,e){const n=e.get(t);if(n)return n;let i=G(t,[],!1).filter((t=>F(t)&&"body"!==P(t))),s=null;const r="fixed"===K(t).position;let o=r?Q(t):t;for(;F(o)&&!X(o);){const e=K(o),n=W(o);n||"fixed"!==e.position||(s=null),(r?!n&&!s:!n&&"static"===e.position&&s&&["absolute","fixed"].includes(s.position)||V(o)&&!n&&ct(t,o))?i=i.filter((t=>t!==o)):s=e,o=Q(o)}return e.set(t,i),i}(e,this._c):[].concat(n),i],o=r[0],a=r.reduce(((t,n)=>{const i=at(e,n,s);return t.top=p(i.top,t.top),t.right=h(i.right,t.right),t.bottom=h(i.bottom,t.bottom),t.left=p(i.left,t.left),t}),at(e,o,s));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}},getOffsetParent:ht,getElementRects:async function(t){const e=this.getOffsetParent||ht,n=this.getDimensions,i=await n(t.floating);return{reference:lt(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}},getClientRects:function(t){return Array.from(t.getClientRects())},getDimensions:function(t){const{width:e,height:n}=tt(t);return{width:e,height:n}},getScale:nt,isElement:F,isRTL:function(t){return"rtl"===K(t).direction}};function mt(t,e,n,i){void 0===i&&(i={});const{ancestorScroll:s=!0,ancestorResize:r=!0,elementResize:o="function"==typeof ResizeObserver,layoutShift:a="function"==typeof IntersectionObserver,animationFrame:c=!1}=i,l=et(t),u=s||r?[...l?G(l):[],...G(e)]:[];u.forEach((t=>{s&&t.addEventListener("scroll",n,{passive:!0}),r&&t.addEventListener("resize",n)}));const d=l&&a?function(t,e){let n,i=null;const s=R(t);function r(){var t;clearTimeout(n),null==(t=i)||t.disconnect(),i=null}return function o(a,c){void 0===a&&(a=!1),void 0===c&&(c=1),r();const{left:l,top:u,width:d,height:m}=t.getBoundingClientRect();if(a||e(),!d||!m)return;const f={rootMargin:-g(u)+"px "+-g(s.clientWidth-(l+d))+"px "+-g(s.clientHeight-(u+m))+"px "+-g(l)+"px",threshold:p(0,h(1,c))||1};let y=!0;function v(t){const e=t[0].intersectionRatio;if(e!==c){if(!y)return o();e?o(!1,e):n=setTimeout((()=>{o(!1,1e-7)}),1e3)}y=!1}try{i=new IntersectionObserver(v,{...f,root:s.ownerDocument})}catch(t){i=new IntersectionObserver(v,f)}i.observe(t)}(!0),r}(l,n):null;let m,f=-1,y=null;o&&(y=new ResizeObserver((t=>{let[i]=t;i&&i.target===l&&y&&(y.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame((()=>{var t;null==(t=y)||t.observe(e)}))),n()})),l&&!c&&y.observe(l),y.observe(e));let v=c?rt(t):null;return c&&function e(){const i=rt(t);!v||i.x===v.x&&i.y===v.y&&i.width===v.width&&i.height===v.height||n();v=i,m=requestAnimationFrame(e)}(),n(),()=>{var t;u.forEach((t=>{s&&t.removeEventListener("scroll",n),r&&t.removeEventListener("resize",n)})),null==d||d(),null==(t=y)||t.disconnect(),y=null,c&&cancelAnimationFrame(m)}}const gt=function(t){return void 0===t&&(t=0),{name:"offset",options:t,async fn(e){var n,i;const{x:s,y:r,placement:o,middlewareData:a}=e,c=await async function(t,e){const{placement:n,platform:i,elements:s}=t,r=await(null==i.isRTL?void 0:i.isRTL(s.floating)),o=L(n),a=k(n),c="y"===S(n),l=["left","top"].includes(o)?-1:1,u=r&&c?-1:1,d=w(e,t);let{mainAxis:h,crossAxis:p,alignmentAxis:m}="number"==typeof d?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&"number"==typeof m&&(p="end"===a?-1*m:m),c?{x:p*u,y:h*l}:{x:h*l,y:p*u}}(e,t);return o===(null==(n=a.offset)?void 0:n.placement)&&null!=(i=a.arrow)&&i.alignmentOffset?{}:{x:s+c.x,y:r+c.y,data:{...c,placement:o}}}}},ft=function(t){return void 0===t&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:i,placement:s}=e,{mainAxis:r=!0,crossAxis:o=!1,limiter:a={fn:t=>{let{x:e,y:n}=t;return{x:e,y:n}}},...c}=w(t,e),l={x:n,y:i},u=await A(e,c),d=S(L(s)),h=E(d);let p=l[h],m=l[d];if(r){const t="y"===h?"bottom":"right";p=b(p+u["y"===h?"top":"left"],p,p-u[t])}if(o){const t="y"===d?"bottom":"right";m=b(m+u["y"===d?"top":"left"],m,m-u[t])}const g=a.fn({...e,[h]:p,[d]:m});return{...g,data:{x:g.x-n,y:g.y-i,enabled:{[h]:r,[d]:o}}}}}},yt=function(t){return void 0===t&&(t={}),{name:"flip",options:t,async fn(e){var n,i;const{placement:s,middlewareData:r,rects:o,initialPlacement:a,platform:c,elements:l}=e,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:h,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:g=!0,...f}=w(t,e);if(null!=(n=r.arrow)&&n.alignmentOffset)return{};const y=L(s),v=S(a),b=L(a)===a,E=await(null==c.isRTL?void 0:c.isRTL(l.floating)),C=h||(b||!g?[B(a)]:function(t){const e=B(t);return[T(t),e,T(e)]}(a)),x="none"!==m;!h&&x&&C.push(...function(t,e,n,i){const s=k(t);let r=function(t,e,n){const i=["left","right"],s=["right","left"],r=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return n?e?s:i:e?i:s;case"left":case"right":return e?r:o;default:return[]}}(L(t),"start"===n,i);return s&&(r=r.map((t=>t+"-"+s)),e&&(r=r.concat(r.map(T)))),r}(a,g,m,E));const M=[a,...C],I=await A(e,f),D=[];let O=(null==(i=r.flip)?void 0:i.overflows)||[];if(u&&D.push(I[y]),d){const t=q(s,o,E);D.push(I[t[0]],I[t[1]])}if(O=[...O,{placement:s,overflows:D}],!D.every((t=>t<=0))){var P,H;const t=((null==(P=r.flip)?void 0:P.index)||0)+1,e=M[t];if(e)return{data:{index:t,overflows:O},reset:{placement:e}};let n=null==(H=O.filter((t=>t.overflows[0]<=0)).sort(((t,e)=>t.overflows[1]-e.overflows[1]))[0])?void 0:H.placement;if(!n)switch(p){case"bestFit":{var R;const t=null==(R=O.filter((t=>{if(x){const e=S(t.placement);return e===v||"y"===e}return!0})).map((t=>[t.placement,t.overflows.filter((t=>t>0)).reduce(((t,e)=>t+e),0)])).sort(((t,e)=>t[1]-e[1]))[0])?void 0:R[0];t&&(n=t);break}case"initialPlacement":n=a}if(s!==n)return{reset:{placement:n}}}return{}}}},vt=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:i,placement:s,rects:r,platform:o,elements:a,middlewareData:c}=e,{element:l,padding:u=0}=w(t,e)||{};if(null==l)return{};const d=M(u),p={x:n,y:i},m=x(s),g=C(m),f=await o.getDimensions(l),y="y"===m,v=y?"top":"left",L=y?"bottom":"right",E=y?"clientHeight":"clientWidth",S=r.reference[g]+r.reference[m]-p[m]-r.floating[g],q=p[m]-r.reference[m],T=await(null==o.getOffsetParent?void 0:o.getOffsetParent(l));let B=T?T[E]:0;B&&await(null==o.isElement?void 0:o.isElement(T))||(B=a.floating[E]||r.floating[g]);const I=S/2-q/2,D=B/2-f[g]/2-1,A=h(d[v],D),O=h(d[L],D),P=A,H=B-f[g]-O,R=B/2-f[g]/2+I,U=b(P,R,H),F=!c.arrow&&null!=k(s)&&R!==U&&r.reference[g]/2-(R<P?A:O)-f[g]/2<0,z=F?R<P?R-P:R-H:0;return{[m]:p[m]+z,data:{[m]:U,centerOffset:R-U-z,...F&&{alignmentOffset:z}},reset:F}}}),bt=(t,e,n)=>{const i=new Map,s={platform:pt,...n},r={...s.platform,_c:i};return(async(t,e,n)=>{const{placement:i="bottom",strategy:s="absolute",middleware:r=[],platform:o}=n,a=r.filter(Boolean),c=await(null==o.isRTL?void 0:o.isRTL(e));let l=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:u,y:d}=D(l,i,c),h=i,p={},m=0;for(let n=0;n<a.length;n++){const{name:r,fn:g}=a[n],{x:f,y:y,data:v,reset:b}=await g({x:u,y:d,initialPlacement:i,placement:h,strategy:s,middlewareData:p,rects:l,platform:o,elements:{reference:t,floating:e}});u=null!=f?f:u,d=null!=y?y:d,p={...p,[r]:{...p[r],...v}},b&&m<=50&&(m++,"object"==typeof b&&(b.placement&&(h=b.placement),b.rects&&(l=!0===b.rects?await o.getElementRects({reference:t,floating:e,strategy:s}):b.rects),({x:u,y:d}=D(l,h,c))),n=-1)}return{x:u,y:d,placement:h,strategy:s,middlewareData:p}})(t,e,{...s,platform:r})},wt=["opacity-0","-translate-y-full","pointer-events-none"];class Lt extends HTMLElement{constructor(){super(),this.backdropOverlay=document.querySelector("backdrop-root"),this.searchInput=this.querySelector("input[type=search]"),this.triggers=document.querySelectorAll("search-trigger"),this.body=document.body,this.header=document.querySelector("header"),this.init()}init(){this.triggers.forEach((t=>{t.addEventListener("click",(()=>{JSON.parse(this.getAttribute("aria-hidden"))?c.open(this):c.close(this)}))})),this.getAttribute("aria-hidden")&&document.addEventListener("keydown",(t=>{"Escape"===t.key&&c.close(this)})),document.addEventListener("click",(t=>{this.contains(t.target)||Array.from(this.triggers).some((e=>e.contains(t.target)))||c.close(this)}))}open(){if(JSON.parse(this.getAttribute("aria-hidden"))){this.body.classList.add("overflow-hidden"),this.setAttribute("aria-hidden","false"),this.backdropOverlay?.classList.remove("translate-x-full");for(const t of wt)this.classList.contains(t)&&this.classList.remove(t);this.computePosition(),this.searchInput?.focus()}}close(){if(!JSON.parse(this.getAttribute("aria-hidden"))){this.body.classList.remove("overflow-hidden"),this.setAttribute("aria-hidden","true"),this.backdropOverlay?.classList.add("translate-x-full");for(const t of wt)this.classList.contains(t)||this.classList.add(t)}}async computePosition(){const t=this.header;if(!t)return;const{x:e,y:n}=await bt(t,this,{placement:"bottom"});Object.assign(this.style,{top:`${n}px`})}}new class{constructor(){this.showMegaMenu=this.showMegaMenu.bind(this),this.hideMegaMenu=this.hideMegaMenu.bind(this),this.keepMenuVisible=this.keepMenuVisible.bind(this),this.init()}init(){this.setupEventListeners(),window.megaMenuManager=this}setupEventListeners(){document.querySelectorAll("a[data-mega-menu]").forEach((t=>{const e=t.getAttribute("data-mega-menu"),n=document.getElementById(e);n&&(t.addEventListener("mouseenter",(()=>{n.classList.add("active")})),t.addEventListener("mouseleave",(()=>{setTimeout((()=>{n.matches(":hover")||t.matches(":hover")||n.classList.remove("active")}),50)})),n.addEventListener("mouseenter",(()=>{n.classList.add("active")})),n.addEventListener("mouseleave",(()=>{setTimeout((()=>{n.matches(":hover")||t.matches(":hover")||n.classList.remove("active")}),50)})))}))}showMegaMenu(t){const e=document.getElementById(t);e&&e.classList.add("active")}keepMenuVisible(t){const e=document.getElementById(t);e&&e.classList.add("active")}hideMegaMenu(t){const e=document.getElementById(t);e&&setTimeout((()=>{const n=document.querySelector(`a[data-mega-menu="${t}"]`);e.matches(":hover")||n&&n.matches(":hover")||e.classList.remove("active")}),50)}};class kt extends HTMLElement{connectedCallback(){window.megaMenuManager&&window.megaMenuManager.init()}}new class{constructor(){this.showMenu=this.showMenu.bind(this),this.hideMenu=this.hideMenu.bind(this),this.handleClickOutside=this.handleClickOutside.bind(this),this.currentHoveredItem=null,this.activeSubmenu=null,this.hoverIntentInstances=new Map,this.menuItems=new Map,this.initializedItems=new Set,this.menuCheckStartTime=Date.now(),this.isInitialized=!1,window.cascadingMenuManager=this,this.checkForMenuItems(),"loading"===document.readyState&&document.addEventListener("DOMContentLoaded",(()=>{this.isInitialized||this.checkForMenuItems()}))}checkForMenuItems(){document.querySelectorAll(".cascading-menu-item.has-children").length>0?(this.setupEventListeners(),this.setupClickOutsideHandler(),this.isInitialized=!0):Date.now()-this.menuCheckStartTime<1e4&&setTimeout((()=>this.checkForMenuItems()),100)}setupEventListeners(){const t=document.querySelectorAll(".cascading-menu-item.has-children");"function"==typeof window.hoverintent?t.forEach((t=>{if(this.initializedItems.has(t))return;const e=t.querySelector(".cascading-submenu");if(!e)return;this.menuItems.set(t,e),e.classList.remove("show");const n=window.hoverintent(t,function(n){this.activeSubmenu&&this.activeSubmenu!==e&&this.hideMenu(this.activeSubmenu),this.showMenu(e),this.activeSubmenu=e,this.currentHoveredItem=t}.bind(this),function(t){this.activeSubmenu!==e||t.relatedTarget&&(t.relatedTarget.closest(".cascading-submenu")||t.relatedTarget.closest(".cascading-menu-item.has-children"))||(this.hideMenu(e),this.activeSubmenu=null,this.currentHoveredItem=null)}.bind(this)).options({sensitivity:4,interval:50,timeout:200});this.hoverIntentInstances.set(t,n),this.initializedItems.add(t)})):setTimeout((()=>this.checkForMenuItems()),100)}setupClickOutsideHandler(){document.addEventListener("click",this.handleClickOutside)}handleClickOutside(t){document.querySelectorAll(".cascading-submenu").forEach((e=>{e.contains(t.target)||(this.hideMenu(e),this.activeSubmenu=null,this.currentHoveredItem=null)}))}showMenu(t){t&&t.classList.add("show")}hideMenu(t){t&&t.classList.remove("show")}hideAllSubmenus(){this.menuItems.forEach((t=>{this.hideMenu(t)})),this.activeSubmenu=null,this.currentHoveredItem=null}destroy(){document.removeEventListener("click",this.handleClickOutside)}isMovingToSubmenu(t){const e=t.closest(".cascading-submenu"),n=t.closest(".cascading-menu-item.has-children");return e?this.activeSubmenu===e:!!n&&(this.currentHoveredItem===n||this.activeSubmenu&&this.menuItems.get(n)===this.activeSubmenu)}};class Et extends HTMLElement{connectedCallback(){window.cascadingMenuManager&&window.cascadingMenuManager.checkForMenuItems()}disconnectedCallback(){window.cascadingMenuManager&&window.cascadingMenuManager.destroy()}}class Ct extends HTMLElement{constructor(){super(),this.triggers=this.querySelectorAll("variant-radio-trigger"),this.inputs=this.querySelectorAll('input[type="radio"]'),this.select=this.querySelector("select"),this.init()}init(){this.triggers.forEach((t=>{t.addEventListener("click",(async e=>{const n=e.currentTarget.getAttribute("aria-labelledby"),i=document.getElementById(n);if(i&&!i.disabled){this.inputs.forEach((t=>{t.checked=!1,t.removeAttribute("checked")})),i.checked=!0,i.setAttribute("checked","checked");const e=t.getAttribute("data-product-slug"),n=t.getAttribute("data-option-values");await this.selectVariant(e,n)}}))})),this.select&&this.select.addEventListener("change",(async t=>{const e=this.select.getAttribute("data-product-slug"),n=t.target.value;await this.selectVariant(e,n)}))}updateProductElement(t,e){const n=document.querySelector(e),i=t.querySelector(e);n&&i&&(n.innerHTML=i.innerHTML)}setLoading(t){const e=document.querySelector("product-section #variant-radio-root");e&&(e.style.opacity=t?.6:1);const n=document.querySelector("product-section cart-drawer-button");if(n){const e=n.querySelector("span"),i=n.querySelector('div[role="status"]');e&&e.classList.toggle("hidden",t),i&&(i.classList.toggle("hidden",!t),i.classList.toggle("flex",t))}}async selectVariant(e,n){const i=`/products/${e}?option_values=${n}`;this.abortController?.abort(),this.abortController=new AbortController,this.setLoading(!0);try{const e=await fetch(i,{signal:this.abortController.signal}),s=await e.text(),r=(new DOMParser).parseFromString(s,"text/html");this.updateProductElement(r,"product-section #quantity-selector-variant"),this.updateProductElement(r,"product-section product-variant-options"),t.emit("product-options-change",{optionValues:n});const o=r.querySelector("product-section #product-price");o&&t.emit("product-price-change",{price:o.innerHTML});const a=document.querySelector("product-section #quantity-selector-variant input");if(a){const e=Number(a.value);t.emit("product-quantity-change",{quantity:e})}this.setLoading(!1)}catch(t){this.setLoading(!1),"AbortError"===t.name?console.log("Fetch aborted by user"):console.error(t)}}}class St extends HTMLElement{constructor(){super(),this.root=this.querySelectorAll("popover-root"),this.trigger=this.querySelectorAll("popover-trigger"),this.content=this.querySelectorAll("popover-content"),this.arrowEl=this.querySelectorAll("popover-arrow"),this.cleanupFns=[],this.hidePopover=()=>{},this.clickOutsideListener=this.handleClickOutside.bind(this),this.ids=0,this.init()}init(){this.trigger.forEach(((t,e)=>{if(!this.root||!this.trigger)return;const n="popover-"+this.ids++;t.setAttribute("aria-describedby",n);const i=this.content[e],s=this.arrowEl[e];if(!i||!s)return;i.setAttribute("id",n);this.hidePopover=()=>{i.style.display="",i.remove(),this.cleanupFns[e]&&(this.cleanupFns[e](),this.cleanupFns[e]=null),document.removeEventListener("click",this.clickOutsideListener)},[["click",()=>{document.body.append(i),i.style.display="block";const n=mt(t,i,(()=>{this.updatePosition(t,i,s)}));this.cleanupFns[e]=n,document.addEventListener("click",this.clickOutsideListener)}]].forEach((([e,n])=>{t.addEventListener(e,n)}))}))}handleClickOutside(t){![...this.trigger,...this.content].some((e=>e.contains(t.target)))&&this.hidePopover&&this.hidePopover()}updatePosition(t,e,n){bt(t,e,{placement:"bottom",middleware:[yt(),gt(4),ft({padding:48}),vt({element:n})]}).then((({x:t,y:i,placement:s,middlewareData:r})=>{Object.assign(e.style,{left:`${t}px`,top:`${i}px`});const{x:o,y:a}=r.arrow||{},c={top:"bottom",right:"left",bottom:"top",left:"right"}[s.split("-")[0]];Object.assign(n.style,{left:null!=o?`${o}px`:"",top:null!=a?`${a}px`:"",right:"",bottom:"",[c]:"-4px"})}))}}class xt extends HTMLElement{constructor(){super(),this.triggers=document.querySelectorAll("copy-to-clipboard"),this.init()}init(){this.triggers.forEach((t=>{t.addEventListener("click",(e=>{const n=t.getAttribute("data-copy-content");n&&navigator.clipboard.writeText(n).then((()=>{console.log("Content copied to clipboard:",n)})).catch((t=>{console.error("Failed to copy content:",t)}))}))}))}}class qt extends HTMLElement{constructor(){super(),this.handleIncrementBound=this.handleIncrement.bind(this),this.handleDecrementBound=this.handleDecrement.bind(this),this.handleInputChangeBound=this.handleInputChange.bind(this),this.handleRemoveBound=this.handleRemove.bind(this)}connectedCallback(){this.quantity=this.querySelector("input"),this.increment=this.querySelector("quantity-selector-increment"),this.decrement=this.querySelector("quantity-selector-decrement"),this.removeItem=this.querySelector("quantity-selector-remove"),this.increment&&this.decrement&&(this.increment.addEventListener("click",this.handleIncrementBound),this.decrement.addEventListener("click",this.handleDecrementBound)),this.quantity&&this.quantity.addEventListener("change",this.handleInputChangeBound),this.removeItem&&this.removeItem.addEventListener("click",this.handleRemoveBound)}disconnectedCallback(){this.increment&&this.decrement&&(this.increment.removeEventListener("click",this.handleIncrementBound),this.decrement.removeEventListener("click",this.handleDecrementBound)),this.quantity&&this.quantity.removeEventListener("change",this.handleInputChangeBound),this.removeItem&&this.removeItem.removeEventListener("click",this.handleRemoveBound),this.quantity=null,this.increment=null,this.decrement=null,this.removeItem=null}handleIncrement(){if(this.quantity){const t=parseInt(this.quantity.step)||1,e=parseInt(this.quantity.max),n=e||0===e?e:1/0,i=Math.min(parseInt(this.quantity.value)+t,n);this.quantity.value=i.toString(),this.quantity.setAttribute("value",i),this.dispatchChangeEvent()}}handleDecrement(){if(this.quantity){const t=parseInt(this.quantity.step)||1,e=parseInt(this.quantity.min)||0,n=Math.max(parseInt(this.quantity.value)-t,e);this.quantity.value=n.toString(),this.quantity.setAttribute("value",n),this.dispatchChangeEvent()}}handleInputChange(t){const e=parseInt(this.quantity.value),n=parseInt(this.quantity.min)||0,i=parseInt(this.quantity.max)||1/0;e<n?(this.quantity.value=n.toString(),this.quantity.setAttribute("value",n)):e>i&&(this.quantity.value=i.toString(),this.quantity.setAttribute("value",i)),this.dispatchChangeEvent()}handleRemove(){this.quantity&&(this.quantity.value="0",this.quantity.setAttribute("value","0"),this.dispatchChangeEvent())}dispatchChangeEvent(){const e=Number(this.quantity.value);"yes"!==this.quantity.getAttribute("data-is-product-quantity")?this.dispatchEvent(new CustomEvent("quantity-change",{detail:{line:Number(this.quantity.getAttribute("data-line")),quantity:e},bubbles:!0,composed:!0,cancelable:!0})):t.emit("product-quantity-change",{quantity:e})}}class Tt extends HTMLElement{constructor(){super(),this.productIdInput=null,this.optionValuesInput=null,this.purchaseOptionTypeInput=null,this.purchaseOptionPlanInput=null,this.quantityInput=null,this.addButton=null,this.subscriptions=[],this.handleAddToCartBound=this.handleAddToCart.bind(this)}connectedCallback(){this.productIdInput=this.querySelector("input[name='product_id']"),this.optionValuesInput=this.querySelector("input[name='option_values']"),this.purchaseOptionTypeInput=this.querySelector("input[name='purchase-option-type']"),this.purchaseOptionPlanInput=this.querySelector("input[name='purchase-option-plan']"),this.quantityInput=this.querySelector("input[name='quantity']"),this.addButton=this.querySelector("button"),this.addButton&&this.addButton.addEventListener("click",this.handleAddToCartBound),this.subscriptions.push(t.on("product-quantity-change",this.handleUpdateProductQuantity.bind(this)),t.on("product-options-change",this.handleUpdateProductOptions.bind(this)),t.on("product-purchase-option-change",this.handleUpdateProductPurchaseOption.bind(this)))}disconnectedCallback(){this.subscriptions.forEach((t=>t())),this.subscriptions.length=0,this.productIdInput=null,this.optionValuesInput=null,this.purchaseOptionTypeInput=null,this.purchaseOptionPlanInput=null,this.quantityInput=null,this.addButton&&this.addButton.removeEventListener("click",this.handleAddToCartBound),this.addButton=null}handleUpdateProductQuantity(t){const{quantity:e}=t;this.quantityInput.value=e}handleUpdateProductOptions(t){const{optionValues:e}=t;this.optionValuesInput.value=e}handleUpdateProductPurchaseOption(t){const{type:e,planId:n}=t;this.purchaseOptionTypeInput.value=e,this.purchaseOptionPlanInput.value=n}toggleLoader(t){this.addButton&&(this.addButton.disabled=t?"disabled":"")}async handleAddToCart(t){t.preventDefault();const e=this.productIdInput.value,n=this.optionValuesInput.value,i=this.optionValuesInput.getAttribute("data-product-options"),s=this.purchaseOptionTypeInput.value,o=this.purchaseOptionPlanInput.value,a=Number(this.quantityInput.value);this.toggleLoader(!0);try{await r.addToCart(e,"",n,i,a,s,o),await this.updateCartCount()}catch(t){console.error("Error handling add to cart:",t)}finally{this.toggleLoader(!1)}}async updateCartCount(){const t=await fetch("/?sections=cart-drawer");if(!t.ok)throw new Error("Failed to fetch cart-drawer");const e=o(await t.text()),n=(new DOMParser).parseFromString(e["cart-drawer"],"text/html").querySelector("cart-drawer-root"),i=n?.dataset.itemCount,s=document.querySelector("cart-count");void 0!==i&&s&&(s.textContent=i)}}class Bt extends HTMLElement{constructor(){super(),this.standardInput=null,this.standardDiv=null,this.standardDivPrice=null,this.subscriptionInput=null,this.subscriptionDiv=null,this.priceInput=null,this.subscriptionSelect=null,this.subscriptionOptions=[],this.subscriptions=[],this.handleClickStandardBound=this.handleClickStandard.bind(this),this.handleClickSubscriptionBound=this.handleClickSubscription.bind(this)}connectedCallback(){this.standardInput=this.querySelector("#standard"),this.standardDiv=this.querySelector("#standard-div"),this.standardDivPrice=this.querySelector("#standard-div-price"),this.subscriptionInput=this.querySelector("#subscription"),this.subscriptionDiv=this.querySelector("#subscription-div"),this.priceInput=this.querySelector("#product-price"),this.subscriptionSelect=this.querySelector("#subscription-select"),this.subscriptionOptions=this.querySelectorAll("#subscription-select option"),this.standardDiv&&this.standardDiv.addEventListener("click",this.handleClickStandardBound),this.subscriptionDiv&&this.subscriptionSelect&&this.subscriptionDiv.addEventListener("click",this.handleClickSubscriptionBound),this.subscriptionSelect&&this.subscriptionSelect.addEventListener("change",this.handleClickSubscriptionBound.bind(this)),this.subscriptions.push(t.on("product-price-change",this.handleUpdateProductPrice.bind(this)))}disconnectedCallback(){this.subscriptions.forEach((t=>t())),this.subscriptions.length=0,this.standardDiv&&this.standardDiv.removeEventListener("click",this.handleClickStandardBound),this.subscriptionDiv&&this.subscriptionSelect&&this.subscriptionDiv.removeEventListener("click",this.handleClickSubscriptionBound),this.subscriptionSelect&&this.subscriptionSelect.removeEventListener("change",this.handleClickSubscriptionBound.bind(this)),this.standardInput=null,this.standardDiv=null,this.standardDivPrice=null,this.subscriptionInput=null,this.subscriptionDiv=null,this.priceInput=null,this.subscriptionSelect=null,this.subscriptionOptions=[]}handleUpdateProductPrice(t){const{price:e}=t;if(this.priceInput){"subscription"!==this.priceInput.getAttribute("data-purchase-option-type")&&(this.priceInput.innerHTML=e)}this.standardDiv&&this.standardDiv.setAttribute("data-price",e),this.standardDivPrice&&(this.standardDivPrice.innerHTML=e)}toggleActive(t,e,n,i){const s=t.getAttribute("data-active-border-class"),r=t.getAttribute("data-inactive-border-class");e&&(e.classList.remove(s),e.classList.add(r)),t.classList.remove(r),t.classList.add(s),n&&n.setAttribute("checked","checked"),i&&i.removeAttribute("checked")}handleClickStandard(){if(this.toggleActive(this.standardDiv,this.subscriptionDiv,this.standardInput,this.subscriptionInput),this.priceInput){this.priceInput.setAttribute("data-purchase-option-type","standard"),this.priceInput.setAttribute("data-purchase-option-plan","");const e=this.standardDiv.getAttribute("data-price");this.priceInput.innerHTML=e,t.emit("product-purchase-option-change",{type:"standard",planId:""})}}handleClickSubscription(){if(this.toggleActive(this.subscriptionDiv,this.standardDiv,this.subscriptionInput,this.standardInput),this.subscriptionSelect&&this.priceInput){const e=this.subscriptionSelect.value;for(const n of this.subscriptionOptions)if(n.value===e){const i=n.getAttribute("data-price");this.priceInput.setAttribute("data-purchase-option-type","subscription"),this.priceInput.setAttribute("data-purchase-option-plan",e),this.priceInput.innerHTML=i,t.emit("product-purchase-option-change",{type:"subscription",planId:e});break}}}}class Mt extends HTMLElement{constructor(){super(),this.drawer=null,this.body=null,this.trigger=null,this.backdropOverlay=null,this.announcement=null,this.header=null,this.searchDialog=null,this.menuStack=[],this.openUiManagerBound=It.bind(this),this.closeUiManagerBound=Dt.bind(this),this.onDocumentKeyDownBound=this.onDocumentKeyDown.bind(this),this.onClickBackgroundOverlayBound=this.onClickBackgroundOverlay.bind(this),this.handleSubmenuTriggerBound=this.handleSubmenuTrigger.bind(this),this.handleBackButtonBound=this.handleBackButton.bind(this)}connectedCallback(){this.drawer=this.querySelector("div"),this.body=document.body,this.trigger=document.querySelector("[data-drawer-menu-trigger]"),this.backdropOverlay=document.querySelector("backdrop-root"),this.announcement=document.querySelector("announcement-root"),this.header=document.querySelector("header"),this.searchDialog=document.querySelector("search-dialog-root"),this.closeButton=this.querySelector("[data-drawer-close]"),this.menuContent=this.querySelector("[data-menu-content]"),this.menuTitle=this.querySelector("[data-header] h2"),this.trigger&&this.trigger.addEventListener("click",this.openUiManagerBound),this.closeButton&&this.closeButton.addEventListener("click",this.closeUiManagerBound),this.setupSubmenuListeners(),document.addEventListener("keydown",this.onDocumentKeyDownBound),this.backdropOverlay&&this.backdropOverlay.addEventListener("click",this.onClickBackgroundOverlayBound)}disconnectedCallback(){this.trigger&&this.trigger.removeEventListener("click",this.openUiManagerBound),this.closeButton&&this.closeButton.removeEventListener("click",this.closeUiManagerBound),this.removeSubmenuListeners(),document.removeEventListener("keydown",this.onDocumentKeyDownBound),this.backdropOverlay&&this.backdropOverlay.removeEventListener("click",this.onClickBackgroundOverlayBound),this.drawer=null,this.body=null,this.trigger=null,this.backdropOverlay=null,this.announcement=null,this.header=null,this.searchDialog=null,this.closeButton=null,this.menuContent=null,this.menuTitle=null,this.menuStack=[]}setupSubmenuListeners(){this.querySelectorAll("[data-submenu-trigger]").forEach((t=>{t.addEventListener("click",this.handleSubmenuTriggerBound)}))}removeSubmenuListeners(){this.querySelectorAll("[data-submenu-trigger]").forEach((t=>{t.removeEventListener("click",this.handleSubmenuTriggerBound)}))}handleSubmenuTrigger(t){const e=t.currentTarget;e.getAttribute("data-parent-title"),e.getAttribute("data-parent-url");const n=e.closest("li").querySelector("[data-submenu-content]");if(!n||!this.menuContent)return;const i=this.menuContent.innerHTML;this.menuStack.push({content:i,title:this.menuTitle.textContent});const s=this.querySelector("[data-header-left]");if(s){s.innerHTML='\n        <button class="flex items-center gap-2" data-back-button>\n          <ion-icon name="chevron-back-outline" class="w-5 h-5"></ion-icon>\n          <span>Back</span>\n        </button>\n      ';const t=s.querySelector("[data-back-button]");t&&t.addEventListener("click",this.handleBackButtonBound)}const r=n.content.cloneNode(!0);this.menuContent.innerHTML="",this.menuContent.appendChild(r),this.setupSubmenuListeners()}handleBackButton(){if(!this.menuStack.length)return;const t=this.menuStack.pop(),e=this.querySelector("[data-header-left]");if(e)if(0===this.menuStack.length)e.innerHTML='<h2 class="font-normal">Menu</h2>';else{e.innerHTML='\n          <button class="flex items-center gap-2" data-back-button>\n            <ion-icon name="chevron-back-outline" class="w-5 h-5"></ion-icon>\n            <span>Back</span>\n          </button>\n        ';const t=e.querySelector("[data-back-button]");t&&t.addEventListener("click",this.handleBackButtonBound)}this.menuContent.innerHTML=t.content,this.setupSubmenuListeners()}onDocumentKeyDown(t){"Escape"===t.key&&this.drawer&&"false"===this.drawer.getAttribute("aria-hidden")&&Dt.call(this)}onClickBackgroundOverlay(t){this.drawer&&"false"===this.drawer.getAttribute("aria-hidden")&&!this.drawer.contains(t.target)&&Dt.call(this)}open(){console.log("Opening drawer menu"),this.header&&this.backdropOverlay&&this.drawer&&this.searchDialog?(this.body.classList.add("overflow-hidden"),this.header.classList.remove("z-60"),this.header.classList.add("z-10"),this.announcement&&(this.announcement.classList.remove("z-60"),this.announcement.classList.add("z-10")),this.searchDialog.classList.remove("z-50"),this.backdropOverlay.classList.remove("-translate-x-full"),this.drawer.classList.remove("-translate-x-full"),this.drawer.setAttribute("aria-hidden","false")):console.warn("Missing required elements for opening drawer")}close(){console.log("Closing drawer menu"),this.header&&this.backdropOverlay&&this.drawer?(this.body.classList.remove("overflow-hidden"),this.header.classList.add("z-60"),this.header.classList.remove("z-10"),this.announcement&&(this.announcement.classList.add("z-60"),this.announcement.classList.remove("z-10")),this.searchDialog.classList.add("z-50"),this.backdropOverlay.classList.add("-translate-x-full"),this.drawer.classList.add("-translate-x-full"),this.drawer.setAttribute("aria-hidden","true")):console.warn("Missing required elements for closing drawer")}}function It(){console.log("openUiManager called"),c.open(this)}function Dt(){console.log("closeUiManager called"),c.close(this)}window.hoverintent=function(t,e,n){var i,s,r,o,a=!1,c=!1,l={},u=0,d=0,h={sensitivity:7,interval:100,timeout:0,handleFocus:!1};function p(t){i=t.clientX,s=t.clientY}function m(t,n){if(d&&(d=clearTimeout(d)),Math.abs(r-i)+Math.abs(o-s)<h.sensitivity)return u=1,c?void 0:e.call(t,n);r=i,o=s,d=setTimeout((function(){m(t,n)}),h.interval)}function g(e){return a=!0,d&&(d=clearTimeout(d)),t.removeEventListener("mousemove",p,!1),1!==u&&(r=e.clientX,o=e.clientY,t.addEventListener("mousemove",p,!1),d=setTimeout((function(){m(t,e)}),h.interval)),this}function f(e){return a=!1,d&&(d=clearTimeout(d)),t.removeEventListener("mousemove",p,!1),1===u&&(d=setTimeout((function(){!function(t,e){d&&(d=clearTimeout(d)),u=0,c||n.call(t,e)}(t,e)}),h.timeout)),this}function y(n){a||(c=!0,e.call(t,n))}function v(e){!a&&c&&(c=!1,n.call(t,e))}function b(){t.removeEventListener("focus",y,!1),t.removeEventListener("blur",v,!1)}return l.options=function(e){var n=e.handleFocus!==h.handleFocus;return h=Object.assign({},h,e),n&&(h.handleFocus?(t.addEventListener("focus",y,!1),t.addEventListener("blur",v,!1)):b()),l},l.remove=function(){t&&(t.removeEventListener("mouseover",g,!1),t.removeEventListener("mouseout",f,!1),b())},t&&(t.addEventListener("mouseover",g,!1),t.addEventListener("mouseout",f,!1)),l},customElements.define("cart-root",a),customElements.define("cart-drawer-root",l),customElements.define("search-dialog-root",Lt),customElements.define("mega-menu-root",kt),customElements.define("variant-radio",Ct),customElements.define("popover-root",St),customElements.define("copy-to-clipboard",xt),customElements.define("quantity-selector-root",qt),customElements.define("cascading-menu-root",Et),customElements.define("add-product-form",Tt),customElements.define("product-purchase-options",Bt),customElements.define("desktop-drawer-menu-root",Mt),function(){if(window.theme){function t(t){var e=document.createElement("script");e.src=t,e.defer=!0,document.body.appendChild(e)}window.theme.slideshow_rendered&&t(window.theme.slideshow_asset_url),window.theme.slideshow_navigation&&t(window.theme.slideshow_navigation_asset_url),window.theme.accordion_rendered&&t(window.theme.accordion_asset_url)}}();
