{%- liquid
  assign address_detail_fields = 'city,zip,province,country' | split: ','
  assign address_details = nil

  for address_field in address_detail_fields
    case address_field
      when 'country'
        assign field_value = address.country.name
      else
        assign field_value = address[address_field]
    endcase

    if field_value
      case address_field
        when 'country'
          assign country_config = geo.countries | find: 'id', field_value

          if country_config
            assign field_value = country_config.name
          endif
        when 'province'
          assign state_config = geo.states | find: 'id', field_value

          if state_config
            assign field_value = state_config.name
          endif
      endcase

      if address_details
        assign address_details = address_details | append: ', ' | append: field_value
      else
        assign address_details = field_value
      endif
    endif
  endfor
-%}

<div class="flex flex-col gap-10 text-body-medium text-{{ color_scheme }}">
  <div class="flex flex-col gap-6">
    <span class="text-title-small uppercase">
      {{ address.name }}
    </span>
    <div class="flex flex-col">
      {% if address.company %}
        <span>
          {{ address.company }}
        </span>
      {% endif %}
      <span>
        {{ address.address1 }}
        {%- if address.address2 -%}
          , {{ address.address2 }}
        {%- endif -%}
      </span>
      {% if address_details %}
        <span>
          {{ address_details }}
        </span>
      {% endif %}
    </div>
  </div>
  {% if is_default_address %}
    <div class="w-fit py-2 px-8 rounded-4 text-body-small font-medium default-address-badge">
      {{ 'customer.addresses.default' | t }}
    </div>
  {% endif %}
</div>
